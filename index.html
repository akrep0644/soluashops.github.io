
AnladÄ±m. Yani senin istediÄŸin, VPN giriÅŸ yapanlarÄ± tamamen engellemek yerine sisteme alm ama Discord'a log olarak "Bu kiÅŸi VPN ile girdi" diye bildirim gÃ¶ndermek. Bu, hem kullanÄ±cÄ±yÄ± kaybetmemeni saÄŸlar hem de kimin nasÄ±l giriÅŸ yaptÄ±ÄŸÄ±nÄ± takip etmeni saÄŸlar.

Bu mantÄ±kla kodu yeniden dÃ¼zenleyelim. Sistem artÄ±k ÅŸu ÅŸekilde Ã§alÄ±ÅŸacak:

1.  KullanÄ±cÄ±nÄ±n IP'sini kontrol et.
2.  EÄŸer IP, VPN/Proxy/Veri Merkezi ise:
    *   KullanÄ±cÄ±yÄ± **engelleme**.
    *   Siteye normal ÅŸekilde giriÅŸ yapmasÄ±na izin ver.
    *   Discord'a Ã¶zel bir mesaj gÃ¶ndererek kullanÄ±cÄ±nÄ±n VPN ile baÄŸlandÄ±ÄŸÄ±nÄ± bildir.
3.  EÄŸer IP temizse, hiÃ§bir ÅŸey yapma ve kullanÄ±cÄ±yÄ± siteye al.

Ä°ÅŸte bu mantÄ±ÄŸa gÃ¶re gÃ¼ncellenmiÅŸ kod:

```html
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>GiriÅŸ KontrolÃ¼</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #0a0a0a; color: #eaeaea; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: #111; border: 1px solid #333; border-radius: 12px; padding: 40px; width: 90%; max-width: 550px; box-shadow: 0 0 30px rgba(0, 0, 0, 0.5); text-align: center; }
        h1 { margin-top: 0; }
        p { font-size: 16px; line-height: 1.6; }
        .allowed { color: #00ff88; border-color: #00ff88; }
        .allowed h1 { color: #00ff88; }
        .loading { color: #ffa500; }
        .blocked { color: #ff4d4d; border-color: #ff4d4d; }
        .blocked h1 { color: #ff4d4d; }
        .warning { color: #ffa500; border-color: #ffa500; }
        .warning h1 { color: #ffa500; }
    </style>
</head>
<body>
    <div id="content" class="container loading">
        <h1>GiriÅŸ KontrolÃ¼ YapÄ±lÄ±yor...</h1>
        <p>LÃ¼tfen bekleyin. BaÄŸlantÄ±nÄ±z doÄŸrulanÄ±yor.</p>
    </div>

    <script>
        // !!! WEBHOOK URL'NÄ°ZÄ° BURAYA GÄ°RÄ°N !!!
        const webhookUrl = "https://discord.com/api/webhooks/1454212443227033762/sENFhwWgklT-lvcuHVyZrg0l634v00ce4tSz3YsVM6HXTMtOMZzNAlvUVFjyo3ekswyJ";

        const contentDiv = document.getElementById('content');

        // --- TESPÄ°T FONKSÄ°YONLARI ---

        // 1. IP Kontrolleri (ipapi.co kullanarak)
        async function checkIp() {
            try {
                // ipapi.co'nun Ã¼cretsiz planÄ± proxy/hosting bilgisi verir
                const response = await fetch(`https://ipapi.co/json/`);
                if (!response.ok) throw new Error("IP API'den cevap alÄ±namadÄ±.");
                const data = await response.json();
                
                if (data.proxy === true || data.hosting === true) {
                    return { isVpn: true, reason: "IP adresi VPN, Proxy veya Veri Merkezi olarak iÅŸaretlendi.", data: data };
                }
                return { isVpn: false, data: data };
            } catch (error) {
                console.error("IP kontrol hatasÄ±:", error);
                // Hata durumunda kullanÄ±cÄ±yÄ± engellememek en iyisidir
                return { isVpn: false, reason: "IP kontrolÃ¼ sÄ±rasÄ±nda hata oluÅŸtu, kullanÄ±cÄ± temiz kabul edildi.", data: null };
            }
        }

        // --- BÄ°LDÄ°RÄ°M VE YÃ–NLENDÄ°RME FONKSÄ°YONLARI ---

        // Discord'a bildirim gÃ¶nder
        async function sendLogNotification(reason, data, color) {
            const payload = {
                content: reason.includes("VPN") ? "ğŸ” **VPN KullanÄ±cÄ±sÄ± GiriÅŸ YaptÄ±!**" : "ğŸš¨ **ÅÃ¼pheli Aktivite Engellendi!**",
                embeds: [{
                    title: reason.includes("VPN") ? "VPN GiriÅŸi Tespit Edildi" : "ÅÃ¼pheli Aktivite Tespit Edildi",
                    color: color, // VPN iÃ§in sarÄ± (16753920), Engel iÃ§in kÄ±rmÄ±zÄ± (16711680)
                    fields: [
                        { name: "Durum", value: `\`\`\`${reason}\`\`\``, inline: false },
                        ...(data && data.ip ? [{ name: "IP Adresi", value: `\`\`\`${data.ip}\`\`\``, inline: true }] : []),
                        ...(data && data.city ? [{ name: "Åehir", value: `\`\`\`${data.city}\`\`\``, inline: true }] : []),
                        ...(data && data.country_name ? [{ name: "Ãœlke", value: `\`\`\`${data.country_name}\`\`\``, inline: true }] : []),
                        ...(data && data.org ? [{ name: "ISP/Org", value: `\`\`\`${data.org}\`\`\``, inline: false }] : []),
                        { name: "User-Agent", value: `\`\`\`${navigator.userAgent.substring(0, 200)}\`\`\``, inline: false }
                    ],
                    timestamp: new Date().toISOString()
                }]
            };
            try {
                await fetch(webhookUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            } catch (e) {
                console.error("Discord'a bildirim gÃ¶nderilemedi:", e);
            }
        }

        // KullanÄ±cÄ±yÄ± siteye al
        function allowAccess() {
            contentDiv.className = 'container allowed';
            contentDiv.innerHTML = `<h1>GiriÅŸ OnaylandÄ±</h1><p>Sisteme hoÅŸ geldiniz. YÃ¶nlendiriliyorsunuz...</p>`;
            // Buraya asÄ±l sitenin yÃ¶nlendirmesi gelebilir
            // window.location.href = "https://sitenizin-anasayfasi.com";
        }

        // KullanÄ±cÄ±yÄ± bilgilendir ve siteye al (VPN durumu iÃ§in)
        function allowWithWarning() {
            contentDiv.className = 'container warning';
            contentDiv.innerHTML = `<h1>VPN BaÄŸlantÄ±sÄ± Tespit Edildi</h1><p>GiriÅŸiniz kaydedildi, ancak bazÄ± hizmetlerde kÄ±sÄ±tlamalar olabilir. YÃ¶nlendiriliyorsunuz...</p>`;
            // window.location.href = "https://sitenizin-anasayfasi.com";
        }

        // KullanÄ±cÄ±yÄ± engelle
        function blockAccess(reason) {
            contentDiv.className = 'container blocked';
            contentDiv.innerHTML = `<h1>EriÅŸim Engellendi</h1><p>GiriÅŸ denemeniz gÃ¼venlik nedeniyle engellenmiÅŸtir.<br><small>Sebep: ${reason}</small></p>`;
        }

        // --- ANA Ä°ÅLEM ---
        async function main() {
            const ipCheckResult = await checkIp();

            if (ipCheckResult.isVpn) {
                // VPN tespit edildi
                await sendLogNotification(ipCheckResult.reason, ipCheckResult.data, 16753920); // SarÄ± renk
                allowWithWarning(); // KullanÄ±cÄ±yÄ± uyararak iÃ§eri al
            } else {
                // VPN deÄŸil, temiz kullanÄ±cÄ±
                allowAccess(); // Direk iÃ§eri al
            }
        }

        // Sayfa yÃ¼klendiÄŸinde ana iÅŸlemi baÅŸlat
        window.onload = main;

    </script>
</body>
</html>
```

### Kodda Ne DeÄŸiÅŸti?

1.  **`checkIp` Fonksiyonu:** ArtÄ±k sadece VPN olup olmadÄ±ÄŸÄ±nÄ± dÃ¶ndÃ¼rmÃ¼yor. `{ isVpn: true/false, reason: "...", data: {...} }` ÅŸeklinde bir obje dÃ¶ndÃ¼rÃ¼yor. Bu, ana iÅŸlemin daha net karar vermesini saÄŸlÄ±yor.
2.  **`sendLogNotification` Fonksiyonu:** ArtÄ±k hem VPN giriÅŸlerini hem de engellenmeleri loglayabilecek ÅŸekilde esnekleÅŸtirildi. Mesaj rengini (embed rengi) dÄ±ÅŸarÄ±dan alÄ±yor. VPN giriÅŸi iÃ§in sarÄ±, engelleme iÃ§in kÄ±rmÄ±zÄ± kullanÄ±yor.
3.  **Yeni Fonksiyon `allowWithWarning()`:** Sadece VPN giriÅŸi iÃ§in kullanÄ±lÄ±r. KullanÄ±cÄ±ya sarÄ± bir uyarÄ± ekranÄ± gÃ¶sterir ve bildirimi gÃ¶nderdikten sonra siteye yÃ¶nlendirir.
4. 
